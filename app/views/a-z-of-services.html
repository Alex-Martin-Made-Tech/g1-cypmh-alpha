<!-- Extends the layout from /views/layout.html -->
{% extends 'layout.html' %}
<!-- 
  In /views/layout.html you can:
    - change the header and footer 
    - add custom CSS and JavaScript
-->

<!-- Set the page title inside the pageTitle block -->
{% block pageTitle %}
  A-Z of services
{% endblock %}

<!-- Breadcrumb goes inside the beforeContent block -->
<!-- More info and code for the breadcrumb can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
  <!-- Breadcrumb -->
  {{ breadcrumb({
    href: "/",
    text: "Home"
  }) }}
{% endblock %}

<!-- Your page content goes inside the content block -->
<!-- More info and code for the page layout can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}

  <div class="nhsuk-grid-row">

    <div class="nhsuk-grid-column-two-thirds">

      <!-- Change the page title here -->
      <h1>
        Placeholder for content page
      </h1>

      <!-- Add your content here -->
      <!-- Styles and components can be found at https://service-manual.nhs.uk/design-system -->

    <div>
        <div id="variable_div"></div>
    </div>


    <button onClick="doSearch()">Search</button>

    <script type="text/javascript">

        const doSearch = () => {

            fetch("/services").then(res => res.json()).then(res => {
              console.log(res)
              document.getElementById("variable_div").innerHTML = res.map(result => {
              return `<div class="nhsuk-card nhsuk-card--clickable">
                <div class="nhsuk-card__content">
                  <h2 class="nhsuk-card__heading nhsuk-heading-m">
                    <a class="nhsuk-card__link" href="${result.url}" target="_blank" rel="noopener noreferrer">
                      ${result.title}
                  </h2>
                  <p class="nhsuk-card__description">${result.description}</p>
                </div>
              </div>`

              // `<div>${result.serviceName}</div>`
            }).join()
            }
            )
        }
    </script>

</div>



      <!-- End of content -->



      <a href="/landing-page" class="nhsuk-button nhsuk-u-margin-bottom-8" id="placeholder-page-back-button">
        Back
    </a>

    
    </div>  

  </div>
{% endblock %}
